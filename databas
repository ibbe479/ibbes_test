import psycopg2
from datetime import date

def connect_to_db():
    try:
        conn = psycopg2.connect(
            host="pgserver.mau.se",
            database="health_center_ab",
            user="ao7391",
            password="8hk5hh1b",
            port="5432"
        )
        return conn
    except psycopg2.Error as e:
        print("Kunde inte ansluta till databasen:", e)
        return None


def doc_login():
    print("*" * 20)
    print("Log in!")
    print("*" * 20)
    doc_med_id = input("Ange ditt employee_number: ")
    doc_password = input("Password: ")
    conn = connect_to_db()
    if not conn:
        return None

    try:
        cursor = conn.cursor()
        cursor.execute(
            "SELECT * FROM doctors WHERE employee_number = %s AND password = %s",
            (doc_med_id, doc_password)
        )
        user = cursor.fetchone()
        if user:
            print(f"Välkommen {user[1]}!")
            return doc_med_id
        else:
            print("Felaktigt användarnamn eller lösenord.")
            return None
    except Exception as e:
        print("Ett fel uppstod vid inloggning:", e)
        return None
    finally:
        cursor.close()
        conn.close()
